# Ресурси розробленого програмного забезпечення із інструкцією по розгортанню

## 1. Загальна інформація про проєкт

HRM (Human Resources Management) система — це веб-додаток для управління персоналом, який включає модулі для управління співробітниками, департаментами, вакансіями, навчанням, оцінкою продуктивності та обліком часу.

Архітектура проєкту базується на розділенні фронтенду та бекенду (client-server architecture), що забезпечує масштабованість та підтримуваність системи.

## 2. Системні вимоги

### 2.1 Мінімальні системні вимоги

- **Операційна система**: Linux, macOS або Windows (з WSL2)
- **Процесор**: 2+ ядра
- **Оперативна пам'ять**: 4 GB RAM (рекомендовано 8 GB)
- **Дисковий простір**: 2 GB вільного місця

### 2.2 Необхідне програмне забезпечення

- **Node.js**: версія 18.0.0 або вища
- **PostgreSQL**: версія 14.0 або вища
- **Redis**: версія 6.0 або вища (опціонально, для rate limiting)
- **npm**: версія 9.0.0 або вища (встановлюється разом з Node.js)
- **Git**: для клонування репозиторію

### 2.3 Перевірка встановлених залежностей

```bash
node --version    # Має бути v18.0.0 або вище
npm --version     # Має бути 9.0.0 або вище
psql --version    # Має бути PostgreSQL 14.0 або вище
redis-cli --version  # Має бути redis 6.0 або вище (опціонально)
```

## 3. Технологічний стек

### 3.1 Backend (Серверна частина)

#### 3.1.1 Мова програмування та середовище виконання
- **Node.js** (v18+): JavaScript runtime середовище на базі V8 движка
- **TypeScript** (v5.6.2): типізована надмножина JavaScript для забезпечення типобезпеки

#### 3.1.2 Фреймворки та бібліотеки
- **Express.js** (v4.19.2): мінімалістичний веб-фреймворк для Node.js
- **Prisma** (v5.19.1): сучасний ORM для роботи з базою даних
  - `@prisma/client`: клієнт для виконання запитів до БД
  - `prisma`: CLI інструменти для міграцій та генерації клієнта

#### 3.1.3 База даних
- **PostgreSQL** (v14+): реляційна система управління базами даних
  - Використовується як основне сховище даних
  - Підтримка транзакцій, зовнішніх ключів, індексів

#### 3.1.4 Автентифікація та безпека
- **jsonwebtoken** (v9.0.2): генерація та валідація JWT токенів
- **bcrypt** (v5.1.1): хешування паролів
- **argon2** (v0.40.3): альтернативний алгоритм хешування паролів
- **helmet** (v7.1.0): набір middleware для захисту HTTP заголовків
- **hpp** (v0.2.3): захист від HTTP Parameter Pollution
- **cors** (v2.8.5): налаштування Cross-Origin Resource Sharing

#### 3.1.5 Валідація даних
- **zod** (v3.23.8): TypeScript-first схема валідації з автоматичним виведенням типів

#### 3.1.6 Обробка файлів
- **multer** (v1.4.5-lts.1): middleware для завантаження файлів (multipart/form-data)

#### 3.1.7 Логування
- **winston** (v3.13.0): багаторівнева система логування
- **morgan** (v1.10.0): HTTP request logger middleware

#### 3.1.8 Rate Limiting та кешування
- **rate-limiter-flexible** (v5.0.3): гнучкий rate limiter
- **redis** (v4.6.13): клієнт Redis для кешування та rate limiting

#### 3.1.9 Документація API
- **swagger-ui-express** (v5.0.1): інтерактивна документація API
- **yamljs** (v0.3.0): парсинг YAML файлів для OpenAPI специфікації

#### 3.1.10 Утиліти
- **dotenv** (v16.4.5): завантаження змінних оточення з .env файлу

#### 3.1.11 Інструменти розробки
- **nodemon** (v3.1.4): автоматичний перезапуск сервера при змінах
- **ts-node** (v10.9.2): виконання TypeScript файлів без попередньої компіляції
- **eslint** (v9.9.0): лінтер для перевірки якості коду
- **prettier** (v3.3.3): форматування коду
- **jest** (v29.7.0): фреймворк для тестування
- **supertest** (v7.0.0): HTTP assertions для тестування API

### 3.2 Frontend (Клієнтська частина)

#### 3.2.1 Мова програмування
- **TypeScript** (v5.6.2): типізована надмножина JavaScript

#### 3.2.2 Фреймворки та бібліотеки
- **React** (v18.3.1): бібліотека для побудови користувацьких інтерфейсів
- **React DOM** (v18.3.1): рендеринг React компонентів у DOM

#### 3.2.3 UI Framework
- **Material-UI (MUI)** (v6.1.5): набір React компонентів, що реалізують Material Design
  - `@mui/material`: основні компоненти
  - `@mui/icons-material`: іконки Material Design
  - `@mui/x-data-grid`: компонент для таблиць даних
  - `@mui/x-tree-view`: компонент для ієрархічного відображення
  - `@emotion/react` та `@emotion/styled`: CSS-in-JS рішення для стилізації

#### 3.2.4 Роутинг
- **react-router-dom** (v6.26.2): маршрутизація на клієнті

#### 3.2.5 Управління станом
- **Redux Toolkit** (v2.2.7): офіційний підхід до написання Redux логіки
- **react-redux** (v9.1.2): офіційні React біндинги для Redux

#### 3.2.6 Запити до API
- **axios** (v1.7.7): HTTP клієнт для браузера та Node.js
- **@tanstack/react-query** (v5.59.0): потужна бібліотека для керування серверним станом, кешуванням та синхронізацією

#### 3.2.7 Валідація форм
- **react-hook-form** (v7.53.0): високопродуктивна бібліотека для роботи з формами
- **@hookform/resolvers** (v3.9.0): резолвери для різних схем валідації
- **yup** (v1.4.0): схема валідації для JavaScript

#### 3.2.8 Збірка та розробка
- **Vite** (v5.4.2): швидкий інструмент для збірки фронтенду
- **@vitejs/plugin-react** (v4.3.3): плагін Vite для React

### 3.3 База даних

#### 3.3.1 Схема бази даних
База даних побудована на PostgreSQL з використанням Prisma ORM. Основні сутності:

- **User**: користувачі системи (ADMIN, HR, EMPLOYEE, CANDIDATE)
- **Employee**: співробітники компанії
- **Department**: департаменти з ієрархічною структурою
- **Position**: посади та грейди
- **Vacancy**: вакансії для рекрутингу
- **Candidate**: кандидати на вакансії
- **Interview**: співбесіди
- **Document**: документи співробітників
- **TimeEntry**: записи обліку часу
- **LeaveRequest**: запити на відпустку
- **Course**: курси навчання
- **Enrollment**: записи на курси
- **FeedbackCycle**: цикли оцінки продуктивності
- **FeedbackQuestion**: питання для оцінки
- **FeedbackResponse**: відповіді на питання
- **Review**: огляди продуктивності
- **Goal**: цілі співробітників

#### 3.3.2 Міграції
Використовується Prisma Migrate для управління схемою бази даних. Міграції зберігаються в `backend/prisma/migrations/`.

## 4. Структура директорій проєкту

```
master_2/
├── backend/                    # Серверна частина
│   ├── src/
│   │   ├── controllers/        # Контролери для обробки запитів
│   │   ├── middlewares/        # Middleware (auth, error handling, rate limiting)
│   │   ├── routes/             # Маршрути API
│   │   ├── services/           # Бізнес-логіка
│   │   ├── db/                 # Робота з БД (seed, client)
│   │   ├── utils/              # Утиліти (logger)
│   │   ├── swagger/             # OpenAPI документація
│   │   ├── tests/               # Тести (unit, integration)
│   │   ├── app.ts               # Конфігурація Express
│   │   └── server.ts            # Точка входу сервера
│   ├── prisma/
│   │   └── schema.prisma        # Схема бази даних
│   ├── uploads/                 # Завантажені файли
│   ├── package.json
│   ├── tsconfig.json
│   └── .env                     # Змінні оточення (не в репозиторії)
│
├── frontend/                    # Клієнтська частина
│   ├── src/
│   │   ├── api/                 # API клієнт (axios)
│   │   ├── components/          # React компоненти
│   │   ├── pages/               # Сторінки додатку
│   │   ├── store/               # Redux store та slices
│   │   ├── utils/               # Утиліти
│   │   ├── App.tsx               # Головний компонент
│   │   ├── main.tsx              # Точка входу
│   │   └── theme.ts              # Тема Material-UI
│   ├── index.html
│   ├── package.json
│   ├── tsconfig.json
│   └── vite.config.ts           # Конфігурація Vite
│
├── instructions/                 # Інструкції та документація
│   └── resources.md             # Цей файл
│
├── for_paperwork/               # Документація для роботи
│
├── deploy.sh                    # Скрипт автоматичного розгортання
├── run-local.sh                 # Скрипт для локального запуску
└── README.md                    # Основна документація
```

## 5. Змінні оточення

### 5.1 Backend (.env)

Файл `backend/.env` містить наступні змінні:

```env
# Порт сервера
PORT=5050

# Підключення до PostgreSQL
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/hrm_local?schema=public"

# Підключення до Redis (опціонально)
REDIS_URL="redis://localhost:6379"


# Оточення виконання
NODE_ENV=development

# Директорія для завантаження файлів
UPLOAD_DIR=./uploads
```

### 5.2 Frontend

Frontend не вимагає окремого .env файлу для базової конфігурації. API URL налаштовується в `src/api/client.ts` та використовує проксі Vite для розробки.

## 6. API Endpoints

### 6.1 Структура API

Всі API endpoints мають префікс `/api/v1`:

- `/api/v1/users` - управління користувачами
- `/api/v1/employees` - управління співробітниками
- `/api/v1/departments` - управління департаментами
- `/api/v1/positions` - управління посадами
- `/api/v1/recruitment` - рекрутинг (вакансії, кандидати, співбесіди)
- `/api/v1/documents` - управління документами
- `/api/v1/time` - облік часу та відпустки
- `/api/v1/learning` - навчання та курси
- `/api/v1/performance` - оцінка продуктивності (360 Feedback)
- `/api/v1/analytics` - аналітика

### 6.2 Автентифікація

Більшість endpoints вимагають JWT токен в заголовку:
```
Authorization: Bearer <token>
```

Публічні endpoints (доступні без авторизації):
- `GET /api/v1/recruitment/vacancies` - список вакансій
- `GET /api/v1/recruitment/vacancies/:id` - деталі вакансії

### 6.3 Документація API

Swagger UI доступний за адресою: `http://localhost:5050/api-docs`

## 7. Автентифікація та авторизація

### 7.1 JWT (JSON Web Tokens)

Система використовує JWT для автентифікації користувачів:
- Токен генерується при успішному вході
- Токен містить `userId` та `role`
- Токен зберігається на клієнті (Redux store)
- Токен передається в заголовку `Authorization` для кожного запиту

### 7.2 Ролі користувачів

- **ADMIN**: повний доступ до всіх модулів
- **HR**: доступ до управління персоналом, рекрутингу, навчання
- **EMPLOYEE**: доступ до власних даних, навчання, оцінки продуктивності
- **CANDIDATE**: доступ до перегляду вакансій та подачі заявок

### 7.3 Хешування паролів

Паролі хешуються за допомогою bcrypt перед збереженням у базі даних.

## 8. Логування

Система використовує Winston для структурованого логування:
- Рівні логування: error, warn, info, debug
- Логи зберігаються в консолі (development) або файлах (production)
- HTTP запити логуються через Morgan middleware

## 9. Тестування

### 9.1 Backend тести

- **Jest**: фреймворк для тестування
- **Supertest**: HTTP assertions для тестування API
- **Unit тести**: тестування окремих функцій та модулів
- **Integration тести**: тестування повних сценаріїв API

### 9.2 Запуск тестів

```bash
cd backend
npm test                 # Всі тести
npm run test:unit        # Тільки unit тести
npm run test:integration # Тільки integration тести
npm run test:cov         # З покриттям коду
```

## 10. Збірка та деплой

### 10.1 Development режим

**Backend:**
```bash
cd backend
npm run dev  # Запуск з nodemon (автоматичний перезапуск)
```

**Frontend:**
```bash
cd frontend
npm run dev  # Запуск Vite dev server
```

### 10.2 Production збірка

**Backend:**
```bash
cd backend
npm run build    # Компіляція TypeScript
npm start        # Запуск скомпільованого коду
```

**Frontend:**
```bash
cd frontend
npm run build    # Збірка для production
npm run preview  # Попередній перегляд збірки
```

## 11. Залежності та сумісність

### 11.1 Node.js версії

Проєкт протестований на Node.js 18.x та 20.x. Рекомендується використовувати LTS версію Node.js.

### 11.2 PostgreSQL версії

Мінімальна версія PostgreSQL: 14.0. Рекомендується використовувати версію 15+ для кращої продуктивності.

### 11.3 Браузери

Frontend підтримує сучасні браузери:
- Chrome/Edge 90+
- Firefox 88+
- Safari 14+

## 12. Додаткові інструменти

### 12.1 Prisma Studio

Візуальний редактор бази даних:
```bash
cd backend
npx prisma studio
```
Доступний за адресою: `http://localhost:5555`

### 12.2 Swagger UI

Інтерактивна документація API доступна після запуску backend за адресою: `http://localhost:5050/api-docs`

## 13. Відомі обмеження та залежності

1. **Redis**: використовується для rate limiting, але система може працювати без нього (з обмеженою функціональністю)
2. **PostgreSQL**: обов'язкова залежність, не може бути замінена іншою БД без змін у коді
3. **Node.js**: обов'язкова залежність для обох частин проєкту

## 14. Підтримка та оновлення

### 14.1 Оновлення залежностей

```bash
# Backend
cd backend
npm update

# Frontend
cd frontend
npm update
```

### 14.2 Оновлення Prisma схеми

Після змін у `schema.prisma`:
```bash
cd backend
npx prisma generate      # Генерація клієнта
npx prisma migrate dev   # Створення міграції
```

## 15. Безпека

### 15.1 Рекомендації для production

1. Змінити `JWT_SECRET` на складний випадковий рядок
2. Використовувати HTTPS для всіх з'єднань
3. Налаштувати CORS для конкретних доменів
4. Регулярно оновлювати залежності
5. Використовувати environment variables для чутливих даних
6. Налаштувати rate limiting для захисту від DDoS
7. Регулярно робити резервні копії бази даних

### 15.2 Валідація вхідних даних

Всі вхідні дані валідуються через Zod схеми перед обробкою.

## 16. Додаткова інформація

Для детальної інформації про конкретні модулі та функціональність дивіться:
- `README.md` - основна документація
- `backend/TEST_README.md` - інструкції з тестування

